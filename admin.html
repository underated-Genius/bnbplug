<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel | BnBPlug</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .alert { padding: 15px; margin: 10px 0; border-radius: 5px; }
        .alert-success { background: #d4edda; color: #155724; }
        .alert-error { background: #f8d7da; color: #721c24; }
        .btn { background: #2a9d8f; color: white; padding: 10px; text-decoration: none; border-radius: 5px; display: inline-block; margin: 5px; }
    </style>
</head>
<body>
    <h1>üè† BnBPlug Admin Panel</h1>
    
    <div id="authCheck">
        <p>Checking admin access...</p>
    </div>
    
    <div id="adminContent" style="display: none;">
        <h2>Welcome, Administrator!</h2>
        
        <div class="alert alert-success">
            ‚úÖ You have full admin access to manage the platform.
        </div>
        
        <h3>Quick Actions:</h3>
        <div>
            <a href="#" class="btn" onclick="manageProperties()">üìã Manage Properties</a>
            <a href="#" class="btn" onclick="viewBookings()">üìä View All Bookings</a>
            <a href="#" class="btn" onclick="manageUsers()">üë• Manage Users</a>
            <a href="dashboard.html" class="btn">üì± User Dashboard</a>
        </div>
        
        <div id="adminResults" style="margin-top: 20px;"></div>
    </div>
    
    <div style="margin-top: 30px;">
        <a href="index.html">‚Üê Back to Home</a> | 
        <a href="dashboard.html">Go to Dashboard</a>
    </div>

    <script>
        // Check if user is admin
        function checkAdmin() {
            const userData = localStorage.getItem('bnbplug_user');
            if (!userData) {
                document.getElementById('authCheck').innerHTML = `
                    <div class="alert alert-error">
                        ‚ùå Access denied. Please login as admin.
                    </div>
                    <p><a href="login.html" class="btn">Login as Admin</a></p>
                `;
                return false;
            }
            
            const user = JSON.parse(userData);
            if (!user.isAdmin) {
                document.getElementById('authCheck').innerHTML = `
                    <div class="alert alert-error">
                        ‚ùå Admin access required. Your account is not an admin.
                    </div>
                    <p><a href="dashboard.html" class="btn">Go to Dashboard</a></p>
                `;
                return false;
            }
            
            document.getElementById('authCheck').innerHTML = `
                <div class="alert alert-success">
                    ‚úÖ Admin access verified: ${user.email}
                </div>
            `;
            document.getElementById('adminContent').style.display = 'block';
            return true;
        }
        
        // Admin functions
        function manageProperties() {
            document.getElementById('adminResults').innerHTML = `
                <h4>Properties Management</h4>
                <p>Total Properties: 3</p>
                <ul>
                    <li>Nairobi Luxury Apartment (Active)</li>
                    <li>Mombasa Beach House (Active)</li>
                    <li>Nakuru Safari Lodge (Active)</li>
                </ul>
                <button class="btn" onclick="addProperty()">‚ûï Add New Property</button>
            `;
        }
        
        function viewBookings() {
            const bookings = JSON.parse(localStorage.getItem('bnbplug_bookings') || '[]');
            document.getElementById('adminResults').innerHTML = `
                <h4>All Bookings</h4>
                <p>Total Bookings: ${bookings.length}</p>
                ${bookings.map(booking => `
                    <div style="border: 1px solid #ddd; padding: 10px; margin: 5px 0;">
                        <strong>${booking.name}</strong><br>
                        ${booking.checkin} to ${booking.checkout}<br>
                        ${booking.guests} guests ‚Ä¢ Ksh ${booking.total}
                    </div>
                `).join('')}
            `;
        }
        
        function manageUsers() {
            document.getElementById('adminResults').innerHTML = `
                <h4>Users Management</h4>
                <p>Total Users: 2</p>
                <ul>
                    <li>admin@bnbplug.co.ke (Administrator)</li>
                    <li>user@example.com (Guest)</li>
                </ul>
            `;
        }
        
        function addProperty() {
            document.getElementById('adminResults').innerHTML += `
                <div style="background: #f8f9fa; padding: 15px; margin-top: 10px;">
                    <h5>Add New Property</h5>
                    <input type="text" placeholder="Property Name" id="propName"><br>
                    <input type="text" placeholder="Location" id="propLocation"><br>
                    <input type="number" placeholder="Price" id="propPrice"><br>
                    <button class="btn" onclick="saveProperty()">Save Property</button>
                </div>
            `;
        }
        
        function saveProperty() {
            alert('Property saved! (This would connect to backend in production)');
        }
        
        // Check admin on page load
        document.addEventListener('DOMContentLoaded', checkAdmin);
    </script>
</body>
</html>
